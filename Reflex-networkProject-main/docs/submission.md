# تحویل پروژه

این فایل توضیح می‌ده که چیکار باید تحویل بدید و چطوری نمره می‌گیرید.

## چیکار باید تحویل بدید؟

### 1. کلون کردن ریپو و ساخت برنچ

اول باید ریپو Reflex رو کلون کنید:

```bash
git clone https://github.com/soroushdeimi/reflex.git
cd reflex
```

بعد یک برنچ با نام خودتون یا شماره دانشجویی بسازید:

```bash
git checkout -b your-name-student-id
# یا
git checkout -b student-123456
```

### 2. نوشتن کد در Xray-Core

کد شما باید در این ساختار باشه:

```
reflex/
├── xray-core/
│   ├── proxy/
│   │   └── reflex/               # کد پیاده‌سازی شما
│   │       ├── inbound/
│   │       │   └── inbound.go
│   │       ├── outbound/
│   │       │   └── outbound.go
│   │       └── config.proto
│   ├── tests/
│   │   └── reflex_test.go        # تست‌های شما
│   └── ...
├── config.example.json            # مثال پیکربندی
├── README.md                      # توضیحات پروژه شما
└── SUBMISSION.md                  # توضیح کوتاه از کارها (اختیاری)
```

مراحل پیاده‌سازی رو از [Step 1](step1-basic.md) تا [Step 5](step5-advanced.md) دنبال کنید.

### 3. Commit و Push

بعد از اینکه کد رو نوشتید:

```bash
git add .
git commit -m "Implement Reflex protocol - [نام شما]"
git push origin your-name-student-id
```

### 4. ساخت Pull Request

بعد از push، در GitHub یک Pull Request بسازید از برنچ شما به main.

در توضیحات PR بنویسید:
- نام و شماره دانشجویی
- خلاصه‌ای از کارهایی که کردید
- چه مشکلاتی داشتید و چطوری حل کردید

## فایل‌های مورد نیاز

### README.md

یک `README.md` در ریشه ریپو که شامل:

```markdown
# پروژه Reflex - [نام شما]

## شماره دانشجویی
[شماره دانشجویی شما]

## توضیحات
[توضیح کوتاه از کارهایی که کردید]

## نحوه اجرا
[چطوری پروژه رو اجرا کنید]

## مشکلات و راه‌حل‌ها
[چه مشکلاتی داشتید و چطوری حل کردید]
```

### config.example.json

یک فایل `config.example.json` در ریشه ریپو که نشون بده چطوری از پروتکل استفاده می‌کنید.

### تست‌ها

فایل‌های تست باید در `xray-core/tests/` باشن. حداقل باید این تست‌ها رو داشته باشید:
- تست handshake
- تست رمزنگاری
- تست fallback
- تست یکپارچگی

## معیارهای نمره‌دهی

### پیاده‌سازی (80 نمره)

#### Step 1 - Basic Structure (10 نمره)
- ساختار پکیج درست: 3 نمره
- config.proto درست تعریف شده و pb.go تولید شده: 3 نمره
- handler اولیه کار می‌کنه: 4 نمره

#### Step 2 - Handshake (15 نمره)
- تبادل کلید X25519: 5 نمره
- استخراج کلید جلسه: 3 نمره
- احراز هویت با UUID: 4 نمره
- مدیریت خطا: 3 نمره

#### Step 3 - Encryption (15 نمره)
- ساختار Frame: 3 نمره
- رمزنگاری ChaCha20-Poly1305: 5 نمره
- خواندن/نوشتن frame: 4 نمره
- محافظت در برابر replay: 3 نمره

#### Step 4 - Fallback (15 نمره)
- تشخیص پروتکل با Peek: 5 نمره
- Fallback به وب‌سرور: 7 نمره
- Multiplexing روی یک پورت: 3 نمره

#### Step 5 - Advanced (25 نمره)
**قابلیت‌های اجباری (15 نمره)**:
- پیاده‌سازی Traffic Morphing پایه: 8 نمره
  - ساختار TrafficProfile: 2 نمره
  - توزیع اندازه بسته‌ها: 3 نمره
  - توزیع timing: 3 نمره
- پشتیبانی از Frame‌های PADDING_CTRL و TIMING_CTRL: 4 نمره
- استخراج پروفایل از ترافیک واقعی (یا استفاده از پروفایل‌های آماده): 3 نمره

**قابلیت‌های امتیازی (5 نمره - یکی از اینها)**:
- TLS با ECH (Encrypted Client Hello): 5 نمره
- QUIC Transport: 5 نمره
- Performance optimization (مثلاً connection pooling): 5 نمره
- شواهد آماری morphing (KS-test، هیستوگرام): 5 نمره

**نکته**: برای نمره کامل Step 5، باید قابلیت‌های اجباری رو پیاده‌سازی کنی. قابلیت‌های امتیازی اختیاری هستن و 5 نمره اضافی می‌دن.

### تست‌ها (20 نمره)

- تست‌های واحد (حداقل 5 تست): 10 نمره
  - هر تست 2 نمره
- تست‌های یکپارچگی: 10 نمره
  - تست اتصال کامل: 5 نمره
  - تست fallback: 3 نمره
  - تست replay protection: 2 نمره

**نکته**: برای نمره کامل، باید:
- همه تست‌ها pass بشن (`go test ./...`)
- Coverage حداقل 60-70% باشه
- Linting pass بشه (`golangci-lint run ./...`)
- Race detection pass بشه (`go test -race ./...`)

**امتیاز اضافی (اختیاری)**:
- Coverage بالای 80%: +2 نمره
- تست‌های edge case کامل: +2 نمره
- Security review (fuzzing, etc.): +2 نمره
- Performance benchmark با مقایسه: +2 نمره

### کد و مستندات (20 نمره)

- کیفیت کد: 10 نمره
  - خوانایی: 3 نمره
  - ساختار: 3 نمره
  - کامنت‌های مناسب: 4 نمره
- مستندات: 10 نمره
  - README کامل: 5 نمره
  - توضیح مشکلات و راه‌حل‌ها: 3 نمره
  - مثال‌های پیکربندی: 2 نمره

## نکات مهم

### کد تمیز
- نام‌گذاری واضح
- کامنت برای بخش‌های پیچیده
- ساختار منطقی

### تست‌های کامل
- همه بخش‌های اصلی تست شده
- تست‌های edge case
- تست‌های خطا

### مستندات خوب
- توضیح واضح چیکار کردید
- مشکلات و راه‌حل‌ها
- نحوه استفاده

## نکات مهم برای تحویل

### نام برنچ
- از نام خودتون یا شماره دانشجویی استفاده کنید
- مثال: `ali-ahmadi-401234567` یا `student-401234567`

### Commit Message
- سعی کنید commit message های واضح بنویسید
- مثال: `Add Reflex protocol implementation` یا `Implement handshake and authentication`

### Pull Request
- عنوان PR باید شامل نام شما و شماره دانشجویی باشه
- در توضیحات PR، خلاصه‌ای از کارهایی که کردید رو بنویسید

### ساختار فایل‌ها

**در ریپو reflex:**
- کد پیاده‌سازی در `xray-core/proxy/reflex/`
- تست‌ها در `xray-core/tests/`
- `README.md` در ریشه
- `config.example.json` در ریشه
- `SUBMISSION.md` (اختیاری) در ریشه

## ددلاین
راجبش صحبت میکنیم.

## سوال دارید؟

اگر سوالی دارید، اول [FAQ](FAQ.md) رو چک کنید. اگر جوابتون رو پیدا نکردید، از من بپرسید.

---

**موفق باشید!** 
